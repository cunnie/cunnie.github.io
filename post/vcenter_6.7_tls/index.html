<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7] | Brian Cunnie's Technical Blog</title><meta name=keywords content><meta name=description content="The following section is the new Quickstart for installing a TLS certificate on vCenter 7
vCenter 7 Quickstart On your vCenter, navigate to Menu → Administration → Certificates → Certificate Management
On the __MACHINE_CERT tile, click Actions, select Generate Certificate Signing Request (CSR).
Enter the appropriate info; for inspiration, this is what we entered:
Common name: vcenter-70.nono.io Organization: nono.io Organizational Unit: homelab Country: United States State/Province: California Locality: San Francisco Email Address: yoyo@nono."><meta name=author content="Brian Cunnie"><link rel=canonical href=https://blog.nono.io/post/vcenter_6.7_tls/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.nono.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.nono.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.nono.io/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.nono.io/apple-touch-icon.png><link rel=mask-icon href=https://blog.nono.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-0NJ11E527T"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0NJ11E527T",{anonymize_ip:!1})}</script><meta property="og:title" content="How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7]"><meta property="og:description" content="The following section is the new Quickstart for installing a TLS certificate on vCenter 7
vCenter 7 Quickstart On your vCenter, navigate to Menu → Administration → Certificates → Certificate Management
On the __MACHINE_CERT tile, click Actions, select Generate Certificate Signing Request (CSR).
Enter the appropriate info; for inspiration, this is what we entered:
Common name: vcenter-70.nono.io Organization: nono.io Organizational Unit: homelab Country: United States State/Province: California Locality: San Francisco Email Address: yoyo@nono."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.nono.io/post/vcenter_6.7_tls/"><meta property="og:image" content="https://nono.io/images/brian_cunnie_profile.jpg"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-05-09T23:16:22+00:00"><meta property="article:modified_time" content="2018-05-09T23:16:22+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nono.io/images/brian_cunnie_profile.jpg"><meta name=twitter:title content="How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7]"><meta name=twitter:description content="The following section is the new Quickstart for installing a TLS certificate on vCenter 7
vCenter 7 Quickstart On your vCenter, navigate to Menu → Administration → Certificates → Certificate Management
On the __MACHINE_CERT tile, click Actions, select Generate Certificate Signing Request (CSR).
Enter the appropriate info; for inspiration, this is what we entered:
Common name: vcenter-70.nono.io Organization: nono.io Organizational Unit: homelab Country: United States State/Province: California Locality: San Francisco Email Address: yoyo@nono."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.nono.io/post/"},{"@type":"ListItem","position":2,"name":"How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7]","item":"https://blog.nono.io/post/vcenter_6.7_tls/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7]","name":"How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7]","description":"The following section is the new Quickstart for installing a TLS certificate on vCenter 7\nvCenter 7 Quickstart On your vCenter, navigate to Menu → Administration → Certificates → Certificate Management\nOn the __MACHINE_CERT tile, click Actions, select Generate Certificate Signing Request (CSR).\nEnter the appropriate info; for inspiration, this is what we entered:\nCommon name: vcenter-70.nono.io Organization: nono.io Organizational Unit: homelab Country: United States State/Province: California Locality: San Francisco Email Address: yoyo@nono.","keywords":[],"articleBody":" The following section is the new Quickstart for installing a TLS certificate on vCenter 7\nvCenter 7 Quickstart On your vCenter, navigate to Menu → Administration → Certificates → Certificate Management\nOn the __MACHINE_CERT tile, click Actions, select Generate Certificate Signing Request (CSR).\nEnter the appropriate info; for inspiration, this is what we entered:\nCommon name: vcenter-70.nono.io Organization: nono.io Organizational Unit: homelab Country: United States State/Province: California Locality: San Francisco Email Address: yoyo@nono.io Host: vcenter-70.nono.io Subject Alternative Name (Optional): 10.0.9.70,2601:646:100:69f0:250:56ff:fe84:2e4a Key Size: 2048 Click Next → Download. Save to a file. Click Finish.\nAcquire a certificate for your host from a Commercial CA. In our example, we acquired a certificate for our host vcenter-70.nono.io from SSls.com, and we purchased their least-expensive offering, the PositiveSSL 1 domain Comodo SSL.\n[We do not endorse either SSLs.com or Sectigo (formerly Comodo); We encourage you to use the reseller and the Certificate Authority (CA) with which you are most comfortable].\nWe have 3 files:\nOur certificate file. This is a single (not a chain) certificate for our server, vcenter-70.nono.io.\nOur chained certificates. (CA Bundle) This chain should not include the server certificate. It should include the root certificate, which should be at the bottom of the chain.\nWe manually appended the root certificate to the chained certificate file received from Sectigo.\nOur root certificate. This must have a .crt extension. [hand-wavy]\nThe biggest challenge is getting the correct root certificate; we strongly suspect it can’t be cross-signed: it needs to be self-signed. Check the openssl and cfssl commands at the bottom of this post to verify that your root certificate is self-signed. If it’s not the correct root certificate, you’ll see the dreaded, “the trustAnchors parameter must be non-empty” error message when replacing the certificates.\nNavigate to Menu → Administration → Certificates → Certificate Management\nSelect Trusted Root Certificates → Add\nClick Browse Browse to your root certificate file and click Add If you get an error, Error occurred while adding trusted root certificates: Trusted root already exists, don’t worry, vCenter already has your root certificate. Select __MACHINE_CERT → Actions → Import and Replace Certificate\nChoose Replace with certificate generated from vCenter server; Click Next Fill in as follows: Machine SSL Certificate: paste your certificate file here (in our case, the certificate for vcenter-70.nono.io). Chain of trusted root certificates: paste your chained certificates here. Click Replace. If you see an error message, “Error occurred while fetching tls: Exception found (the trustAnchors parameter must be non-empty)”, then you haven’t added root certificate properly, or it’s not appended at the end of your chained certificate, or (we suspect but aren’t sure that this is a requirement) what you think is a self-signed root certificate is really a cross-signed root certificate. The following section is the original post for installing a TLS certificate on VCSA 6.7\n0. Abstract We want a green padlock on our VCSA’s web client; when we use our browser to navigate to our VCSA, we’d like it too look like the following:\nThis blog posts describes the steps to follow in order to install a TLS certificate on a VCSA 6.7.\nAuthor’s note: we use our VCSA’s fully qualified domain name (FQDN) “vcenter-67.nono.io” throughout this document, with the understanding that you should substitute your VCSA’s FQDN accordingly.\nNote that this blog post is narrowly scoped: we are only replacing one of the many certificates that the VCSA’s services use, we are only replacing the certificate that the human operator sees. Large enterprises may be more interested in replacing all the certificates, in which case they should refer to this VMware Knowledge Base article.\n1. Pre-requisites Before we begin, we need a TLS key, a chained certificate, and a root certificate. Also, we need to enable ssh access to our VCSA, for when certificates go horribly wrong the web interface may be unusable, and the only mechanism to recover (other than reinstalling) is to ssh onto the VCSA and reset the certificates.\n1.0 Enable OpenSSH Enable ssh by browsing to the Appliance Management User Interface (Appliance MUI, formerly known as VAMI), https://vcenter-67.nono.io:5480, and navigating to Access → Access Settings → Edit → Edit Access Settings → Enable SSH Login → toggle enabled → OK.\n1.1 Acquire Certificate from a Commercial CA We won’t discuss how to acquire a certificate, but we will point out that Heroku has a fairly succinct (and vendor-agnostic) description of the process.\nNote: VCSA, like Heroku, doesn’t support elliptic curve keys and only supports RSA keys (even though, in our estimation, elliptic curves are better if for no other reason than they are so much more terse than RSA keys). This means that if you use a modern tool such as cfssl, you’ll need to override its defaults to force it to generate RSA keys (e.g. cfssl print-defaults csr | jq -r '.key = {\"algo\":\"rsa\",\"size\":2048}').\nAfter the process is complete, we should have three files:\nvcenter-67.nono.io.chain.pem - this is the chained certificate; your server’s certificate should be at the top, followed by any intermediate certificates. vcenter-67.nono.io.key - this is the RSA private key. You can see our key; however, we have taken the precaution of removing several lines [not-what-you-think] . addtrustexternalcaroot.crt — This is the root certificate [hand-wavy] . 2. Install the Certificate 2.0 Install the Certificate via Web Interface Browse to the VCSA’s web client https://vcenter-67.nono.io Select “Launch vSphere Client (HTML5)” (we use the HTML interface; Flash™ is too much for us) Log in Menu → Administration Certificates → Certificate Management Manage Certificates of vCenter Server IP/FQDN: vcenter-67.nono.io (don’t use “localhost”) Username: administrator@vsphere.local Password: WhateverYourPasswordIs Click “Log in and manage certificates” Trusted Root Certificates Click Add Certificate Chain → Browse (browse to your root certificate \u0026 upload). Click Add. Page should now show two Trusted Root Certificates Find “__MACHINE_CERT” Actions → Replace Certificate Chain → Browse (browse to your certificate \u0026 upload) Private Key → Browse (browse to your certificate \u0026 upload) Click Replace, success should resemble image below Reboot the vCenter for the new certificates to take effect: Browse to the VCSA Management Interface (VAMI), https://vcenter-67.nono.io:5480, and navigate to Actions → Reboot → Reboot the system? → Yes.\n2.1 Install the Certificate via CLI For those who would prefer to bypass the GUI and install the certificate via the CLI, we offer this alternative. First, ssh into our VCSA and start a shell:\nssh root@vcenter-67.nono.io * List APIs: \"help api list\" * List Plugins: \"help pi list\" * Launch BASH: \"shell\" Command\u003e shell Next we copy our certificates and keys from our workstation, tara.nono.io:\nscp cunnie@tara.nono.io:{vcenter-67.nono.io.chain.pem,vcenter-67.nono.io.key,addtrustexternalcaroot.crt} . Launch the certificate manager and install the keys and certificates:\n/usr/lib/vmware-vmca/bin/certificate-manager 1. Replace Machine SSL certificate with Custom Certificate 2. Import custom certificate(s) and key(s) to replace existing Machine SSL certificate Please provide valid custom certificate for Machine SSL. vcenter-67.nono.io.chain.pem Please provide valid custom key for Machine SSL. vcenter-67.nono.io.key Please provide the signing certificate of the Machine SSL certificate. addtrustexternalcaroot.crt Unlike the GUI, which returns immediately, the CLI spends several minutes replacing certificates. When it has finished, reboot:\nshutdown -r now 2.2 Check: Refresh Your Browsers Browse to the VCSA web client and confirm the certificate is installed (green padlock). You may need to refresh the page. As a bonus, the Appliance MUI (VAMI) has the new certificate, too!\n3. Gotchas If you don’t upload the root certificate but update the certificate \u0026 key, after rebooting you will see the following in a red banner at the top:\n503 Service Unavailable (Failed to connect to endpoint: [N7Vmacore4Http20NamedPipeServiceSpecE:0x00007f843400bef0] _serverNamespace = / action = Allow _pipeName =/var/run/vmware/vpxd-webserver-pipe)\nIf you browse to port 5480 and see an odd “0 -” it means you need to refresh your browser (on macOS, ⌘-R). It may also mean that your vCenter is still booting and that you should wait a few more minutes.\nIf you use an elliptic curve key, you will not be able to upload your key \u0026 certificate; you’ll see an error similar to the following:\nIf things go really bad, you won’t get a login screen; instead, you’ll see:\n[400] An error occurred while sending an authentication request to the vCenter Single Sign-On server - An error occurred when processing the metadata during vCenter Single Sign-On setup - javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target.\nYou’ll need to reset your certificates; see the next section.\n3.0 Resetting the Certificates when things go wrong If the web client is unusable, you’ll need to ssh in and use certificate-manager to reset the certificates. We’ve tested this procedure on vCenter 6.7 \u0026 7.0.\nssh root@vcenter-70.nono.io shell /usr/lib/vmware-vmca/bin/certificate-manager Choose option 8, “Reset all Certificates”. Watch the screen scroll by as it replaces the certificates, then reboot (shutdown -r now).\nReferences VMware Knowledge Base article, “Replacing a vSphere 6.x Machine SSL certificate with a Custom Certificate Authority Signed Certificate”. We followed these instructions when generating our Certificate Signing Request (CSR) with cfssl. This gist contains our chained certificate, our root certificate, and our redacted key (our key with several lines removed). This VMware thread describes a procedure to remove old trusted root certificates from PSC. Footnotes [not-what-you-think]\nWe’re not publishing our private key, but not for the reasons you think. You probably think it’s about security, about preventing man-in-the-middle (MITM) attacks. It’s not. Our server is behind a firewall and can only be accessed from our internal network. If you were in a position to execute an MITM attack, it would mean that our network was grossly compromised, and the jig would be up (an MITM attack would be the least of our concerns).\nNo, security is not the reason. Revocation is the reason. The last time that we published a private key, our certificate was revoked in a rather spectacular manner, and the CA refused to issue us another one unless we promised not to publish it. We agreed, and we hew to our agreement, for we are men of our word.\n[hand-wavy]\nThis is the most hand-wavy part of the blog post, obtaining the root certificate. On one hand, root certificates are everywhere — every one of the billions of browsers has a copy of the approximately 160 root certificates.\nOn the other hand, you may have to do some digging. Whichever CA you choose should publish their root certificate. Sectigo, for example, publishes their root certificate here.\nIf that’s a dead-end, you may want to check Mozilla’s list of root certificates.\nWe had an interesting experience where one version of the Sectigo root certificate whose canonical name (CN) was “USERTrust RSA Certification Authority”, worked, but the intermediate certificate included in the chain, whose canonical name was also “USERTrust RSA Certification Authority”, and which we mistakenly took for a root certificate, did not work.\nTo determine if the certificate you have is a root certificate, confirm the subject is the same as the issuer. In the following example, we use two common TLS command line tools (cfssl and openssl) to examine the Sectigo root certificate addtrustexternalcaroot.crt and ensure the issuer is the same as the subject:\nFirst we use cfssl, whose output is JSON, which we pipe to jq to extract the Common Name of the issuer and subject:\ncfssl certinfo -cert addtrustexternalcaroot.crt | jq -r '[ .issuer.common_name, .subject.common_name ]' produces:\n[ \"AddTrust External CA Root\", \"AddTrust External CA Root\" ] With openssl we can use a simple egrep to extract the information we need.\nopenssl x509 -in addtrustexternalcaroot.crt -noout -text | egrep \"Issuer:|Subject:\" produces:\nIssuer: C=SE, O=AddTrust AB, OU=AddTrust External TTP Network, CN=AddTrust External CA Root Subject: C=SE, O=AddTrust AB, OU=AddTrust External TTP Network, CN=AddTrust External CA Root Now, when faced with the above output, a reasonable might ask, “why on earth is Comodo using Addtrust’s root certificate? Why don’t they use their own certificate?” One can only speculate.\nCorrections \u0026 Updates 2020-12-26\nRe-wrote instructions to have vCenter generate the CSR. It appears to work better, specifically with regard to the update manager (though I can’t find the links to bolster that assertion).\n2020-05-22\nUpdated to include newly-issued TLS certificates to replace the ones that had been revoked, but this time we did not publish the private key (the cause of the revocation).\nWe deprecate Comodo in favor of Sectigo, the new name.\n2020-04-08\nWe include a Quickstart section for vCenter 7.\n","wordCount":"2046","inLanguage":"en","datePublished":"2018-05-09T23:16:22Z","dateModified":"2018-05-09T23:16:22Z","author":{"@type":"Person","name":"Brian Cunnie"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.nono.io/post/vcenter_6.7_tls/"},"publisher":{"@type":"Organization","name":"Brian Cunnie's Technical Blog","logo":{"@type":"ImageObject","url":"https://blog.nono.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.nono.io/ accesskey=h title="Brian Cunnie's Technical Blog (Alt + H)">Brian Cunnie's Technical Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.nono.io/>Home</a>&nbsp;»&nbsp;<a href=https://blog.nono.io/post/>Posts</a></div><h1 class=post-title>How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7]</h1><div class=post-meta><span title='2018-05-09 23:16:22 +0000 UTC'>May 9, 2018</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Brian Cunnie&nbsp;|&nbsp;<a href=https://github.com/cunnie/cunnie.github.io/tree/master/content/post/vcenter_6.7_tls.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><div class="alert alert-success" role=alert><p>The following section is the new Quickstart for installing a TLS certificate on vCenter 7</p></div><h2 id=vcenter-7-quickstart>vCenter 7 Quickstart<a hidden class=anchor aria-hidden=true href=#vcenter-7-quickstart>#</a></h2><p>On your vCenter, navigate to <strong>Menu → Administration → Certificates → Certificate Management</strong></p><p>On the <em>__MACHINE_CERT</em> tile, click <strong>Actions</strong>, select <strong>Generate Certificate
Signing Request (CSR)</strong>.</p><p>Enter the appropriate info; for inspiration, this is what we entered:</p><ul><li>Common name: <strong>vcenter-70.nono.io</strong></li><li>Organization: <strong>nono.io</strong></li><li>Organizational Unit: <strong>homelab</strong></li><li>Country: <strong>United States</strong></li><li>State/Province: <strong>California</strong></li><li>Locality: <strong>San Francisco</strong></li><li>Email Address: <strong><a href=mailto:yoyo@nono.io>yoyo@nono.io</a></strong></li><li>Host: <strong>vcenter-70.nono.io</strong></li><li>Subject Alternative Name (Optional): <strong>10.0.9.70,2601:646:100:69f0:250:56ff:fe84:2e4a</strong></li><li>Key Size: <strong>2048</strong></li></ul><p>Click <strong>Next</strong> → <strong>Download</strong>. Save to a file. Click <strong>Finish</strong>.</p><p>Acquire a certificate for your host from a Commercial CA. In our example, we
acquired a certificate for our host <code>vcenter-70.nono.io</code>
from <a href=https://ssls.com>SSls.com</a>, and we purchased
their least-expensive offering, the <em>PositiveSSL 1 domain Comodo SSL</em>.</p><p><em>[We do not endorse either SSLs.com or Sectigo (formerly
Comodo); We encourage you to use the reseller and the Certificate Authority
(CA) with which you are most comfortable]</em>.</p><p>We have 3 files:</p><ol><li><p>Our <a href=https://raw.githubusercontent.com/cunnie/docs/master/tls/vcenter-70_nono_io.crt>certificate
file</a>.
This is a single (not a chain) certificate for our server,
<a href=https://vcenter-70.nono.io>vcenter-70.nono.io</a>.</p></li><li><p>Our <a href=https://raw.githubusercontent.com/cunnie/docs/master/tls/vcenter-70_nono_io.ca-bundle>chained
certificates</a>.
(CA Bundle) This chain should <em>not</em> include the server certificate. It
<em>should</em> include the root certificate, which should be at the bottom of the
chain.</p><p>We <strong>manually appended the root certificate to the chained certificate</strong> file
received from Sectigo.</p></li><li><p>Our <a href=https://raw.githubusercontent.com/cunnie/docs/master/tls/SHA-2%20Root%20%20USERTrust%20RSA%20Certification%20Authority.crt>root certificate</a>. This must have a <code>.crt</code> extension.
<sup><a href=#hand_wavy class=alert-link>[hand-wavy]</a></sup></p></li></ol><div class="alert alert-warning" role=alert><p>The biggest challenge is getting the correct root certificate; we strongly
suspect it can&rsquo;t be cross-signed: it needs to be self-signed. Check the
<code>openssl</code> and <code>cfssl</code> commands at the bottom of this post to verify that your
root certificate is self-signed. If it&rsquo;s not the correct root certificate,
you&rsquo;ll see the dreaded, &ldquo;the trustAnchors parameter must be non-empty&rdquo; error
message when replacing the certificates.</p></div><p>Navigate to <strong>Menu → Administration → Certificates → Certificate Management</strong></p><p>Select <strong>Trusted Root Certificates → Add</strong></p><ul><li>Click <strong>Browse</strong></li><li>Browse to your root certificate file and click <strong>Add</strong></li><li>If you get an error, <code>Error occurred while adding trusted root certificates: Trusted root already exists</code>, don&rsquo;t worry, vCenter already has your root
certificate.</li></ul><p>Select <em><strong>__MACHINE_CERT</strong></em> <strong>→ Actions → Import and Replace Certificate</strong></p><figure class=center><img loading=lazy src=https://user-images.githubusercontent.com/1020675/78815274-e56d2200-7984-11ea-9894-2a226d7a1ab2.png></figure><ul><li>Choose <strong>Replace with certificate generated from vCenter server</strong>; Click
<strong>Next</strong></li><li>Fill in as follows:<ul><li><strong>Machine SSL Certificate</strong>: paste your certificate file here (in our case,
the certificate for <em>vcenter-70.nono.io</em>).</li><li><strong>Chain of trusted root certificates</strong>: paste your chained certificates
here.</li></ul></li><li>Click <strong>Replace</strong>. If you see an error message, &ldquo;Error occurred while fetching
tls: Exception found (the trustAnchors parameter must be non-empty)&rdquo;, then you
haven&rsquo;t added root certificate properly, or it&rsquo;s not appended at the end of
your chained certificate, or (we suspect but aren&rsquo;t sure that this is a
requirement) what you think is a self-signed root certificate is really a
cross-signed root certificate.</li></ul><div class="alert alert-success" role=alert><p>The following section is the original post for installing a TLS certificate on VCSA 6.7</p></div><h2 id=0-abstract>0. Abstract<a hidden class=anchor aria-hidden=true href=#0-abstract>#</a></h2><p>We want a green padlock on our VCSA&rsquo;s web client; when we use our browser to
navigate to our VCSA, we&rsquo;d like it too look like the following:</p><figure><img loading=lazy src=https://user-images.githubusercontent.com/1020675/39831510-9630f47e-5379-11e8-9edf-b4ec6ca8c397.png></figure><p>This blog posts describes the steps to follow in order to install a TLS
certificate on a VCSA 6.7.</p><p><em>Author&rsquo;s note: we use our VCSA&rsquo;s fully qualified domain name
(<a href=https://en.wikipedia.org/wiki/Fully_qualified_domain_name>FQDN</a>)
&ldquo;vcenter-67.nono.io&rdquo; throughout this document, with the understanding that you
should substitute your VCSA&rsquo;s FQDN accordingly.</em></p><p>Note that this blog post is narrowly scoped: we are only replacing one of the
many certificates that the VCSA&rsquo;s services use, we are only replacing the
certificate that the human operator sees. Large enterprises may be more
interested in replacing <em>all</em> the certificates, in which case they should refer
to this <a href=https://kb.vmware.com/s/article/2111219>VMware Knowledge Base
article</a>.</p><h2 id=1-pre-requisites>1. Pre-requisites<a hidden class=anchor aria-hidden=true href=#1-pre-requisites>#</a></h2><p>Before we begin, we need a TLS key, a chained certificate, and a root
certificate. Also, we need to enable ssh access to our VCSA, for when
certificates go horribly wrong the web interface may be unusable, and the only
mechanism to recover (other than reinstalling) is to ssh onto the VCSA and reset
the certificates.</p><h3 id=10-enable-openssh>1.0 Enable OpenSSH<a hidden class=anchor aria-hidden=true href=#10-enable-openssh>#</a></h3><p>Enable ssh by browsing to the <a href=https://blogs.vmware.com/vsphere/2015/09/web-based-management-for-the-vcsa-is-back.html>Appliance Management User
Interface</a>
(Appliance MUI, formerly known as VAMI), <a href=https://vcenter-67.nono.io:5480>https://vcenter-67.nono.io:5480</a>, and
navigating to <em>Access → Access Settings → Edit → Edit Access Settings → Enable
SSH Login → toggle enabled → OK</em>.</p><h3 id=11-acquire-certificate-from-a-commercial-ca>1.1 Acquire Certificate from a Commercial CA<a hidden class=anchor aria-hidden=true href=#11-acquire-certificate-from-a-commercial-ca>#</a></h3><p>We won&rsquo;t discuss how to acquire a certificate, but we will point out that Heroku has a fairly succinct (and vendor-agnostic) <a href=https://devcenter.heroku.com/articles/acquiring-an-ssl-certificate>description</a> of the process.</p><p>Note: VCSA, like Heroku, doesn&rsquo;t support <a href=https://en.wikipedia.org/wiki/Elliptic-curve_cryptography>elliptic
curve</a> keys and only
supports RSA keys (even though, in our estimation, elliptic curves are better if
for no other reason than they are so much more <a href=https://www.globalsign.com/en/blog/elliptic-curve-cryptography/>terse than
RSA</a> keys).
This means that if you use a modern tool such as
<a href=https://github.com/cloudflare/cfssl>cfssl</a>, you&rsquo;ll need to override its
defaults to force it to generate RSA keys (e.g. <code>cfssl print-defaults csr | jq -r '.key = {"algo":"rsa","size":2048}'</code>).</p><p>After the process is complete, we should have three files:</p><ul><li><a href=https://gist.github.com/cunnie/1119b9b59c7a50391987987310c76e6d#file-vcenter-67-nono-io-chain-pem><code>vcenter-67.nono.io.chain.pem</code></a> - this is the chained certificate; your
server&rsquo;s certificate should be at the top, followed by any intermediate
certificates.</li><li><a href=https://gist.github.com/cunnie/1119b9b59c7a50391987987310c76e6d#file-vcenter-67-nono-io-key><code>vcenter-67.nono.io.key</code></a> - this is the RSA private key. You can see our
key; however, we have taken the precaution of removing several
lines
<sup><a href=#not_what_you_think class=alert-link>[not-what-you-think]</a></sup>
.</li><li><a href=https://support.comodo.com/index.php?/Knowledgebase/Article/View/854/75/root-addtrustexternalcaroot><code>addtrustexternalcaroot.crt</code></a> — This is the root certificate
<sup><a href=#hand_wavy class=alert-link>[hand-wavy]</a></sup>
.</li></ul><h2 id=2-install-the-certificate>2. Install the Certificate<a hidden class=anchor aria-hidden=true href=#2-install-the-certificate>#</a></h2><h3 id=20-install-the-certificate-via-web-interface>2.0 Install the Certificate via Web Interface<a hidden class=anchor aria-hidden=true href=#20-install-the-certificate-via-web-interface>#</a></h3><ul><li>Browse to the VCSA&rsquo;s web client <a href=https://vcenter-67.nono.io>https://vcenter-67.nono.io</a></li><li>Select &ldquo;Launch vSphere Client (HTML5)&rdquo; <em>(we use the HTML interface; Flash™ is too much for us)</em></li><li>Log in</li><li>Menu → Administration</li><li>Certificates → Certificate Management</li><li>Manage Certificates of vCenter<ul><li>Server IP/FQDN: <strong>vcenter-67.nono.io</strong> <em>(don&rsquo;t use &ldquo;localhost&rdquo;)</em></li><li>Username: <strong><a href=mailto:administrator@vsphere.local>administrator@vsphere.local</a></strong></li><li>Password: <strong><em>WhateverYourPasswordIs</em></strong></li></ul></li><li>Click &ldquo;Log in and manage certificates&rdquo;</li><li>Trusted Root Certificates<ul><li>Click Add</li><li>Certificate Chain → Browse (browse to your root certificate & upload). Click Add.</li></ul></li><li>Page should now show two Trusted Root Certificates</li><li>Find &ldquo;__MACHINE_CERT&rdquo;</li><li>Actions → Replace<ul><li>Certificate Chain → Browse (browse to your certificate & upload)</li><li>Private Key → Browse (browse to your certificate & upload)</li></ul></li><li>Click Replace, success should resemble image below</li></ul><figure><img loading=lazy src=https://user-images.githubusercontent.com/1020675/39830647-e237c6c0-5376-11e8-9549-600f05b9c3b2.png></figure><p>Reboot the vCenter for the new certificates to take effect:
Browse to the VCSA Management Interface (VAMI),
<a href=https://vcenter-67.nono.io:5480>https://vcenter-67.nono.io:5480</a>, and navigate to <em>Actions → Reboot →
Reboot the system? → Yes</em>.</p><h3 id=21-install-the-certificate-via-cli>2.1 Install the Certificate via CLI<a hidden class=anchor aria-hidden=true href=#21-install-the-certificate-via-cli>#</a></h3><p>For those who would prefer to bypass the GUI and install the certificate via the
CLI, we offer this alternative. First, ssh into our VCSA and start a shell:</p><pre tabindex=0><code>ssh root@vcenter-67.nono.io

    * List APIs: &#34;help api list&#34;
    * List Plugins: &#34;help pi list&#34;
    * Launch BASH: &#34;shell&#34;

Command&gt; shell
</code></pre><p>Next we copy our certificates and keys from our workstation, <code>tara.nono.io</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp cunnie@tara.nono.io:<span style=color:#f92672>{</span>vcenter-67.nono.io.chain.pem,vcenter-67.nono.io.key,addtrustexternalcaroot.crt<span style=color:#f92672>}</span> .
</span></span></code></pre></div><p>Launch the certificate manager and install the keys and certificates:</p><pre tabindex=0><code>/usr/lib/vmware-vmca/bin/certificate-manager
  1. Replace Machine SSL certificate with Custom Certificate
    2. Import custom certificate(s) and key(s) to replace existing Machine SSL certificate
      Please provide valid custom certificate for Machine SSL. vcenter-67.nono.io.chain.pem
      Please provide valid custom key for Machine SSL. vcenter-67.nono.io.key
      Please provide the signing certificate of the Machine SSL certificate. addtrustexternalcaroot.crt
</code></pre><p>Unlike the GUI, which returns immediately, the CLI spends several minutes replacing certificates. When it has finished, reboot:</p><pre tabindex=0><code>shutdown -r now
</code></pre><h3 id=22-check-refresh-your-browsers>2.2 Check: Refresh Your Browsers<a hidden class=anchor aria-hidden=true href=#22-check-refresh-your-browsers>#</a></h3><p>Browse to the VCSA web client and confirm the certificate is installed (green
padlock). You may need to refresh the page. As a bonus, the Appliance MUI (VAMI)
has the new certificate, too!</p><h2 id=3-gotchas>3. Gotchas<a hidden class=anchor aria-hidden=true href=#3-gotchas>#</a></h2><p>If you don&rsquo;t upload the root certificate but update the certificate & key, after rebooting you will see the following in a red banner at the top:</p><blockquote><p>503 Service Unavailable (Failed to connect to endpoint: [N7Vmacore4Http20NamedPipeServiceSpecE:0x00007f843400bef0] _serverNamespace = / action = Allow _pipeName =/var/run/vmware/vpxd-webserver-pipe)</p></blockquote><p>If you browse to port 5480 and see an odd &ldquo;0 -&rdquo; it means you need to refresh
your browser (on macOS, ⌘-R). It may also mean that your vCenter is still
booting and that you should wait a few more minutes.</p><p>If you use an elliptic curve key, you will not be able to upload your key &
certificate; you&rsquo;ll see an error similar to the following:</p><figure><img loading=lazy src=https://user-images.githubusercontent.com/1020675/39839080-e62ccdac-538f-11e8-9b8a-c62acb55bfb1.png></figure><p>If things go really bad, you won&rsquo;t get a login screen; instead, you&rsquo;ll see:</p><blockquote><p>[400] An error occurred while sending an authentication request to the vCenter
Single Sign-On server - An error occurred when processing the metadata during
vCenter Single Sign-On setup - javax.net.ssl.SSLHandshakeException:
sun.security.validator.ValidatorException: PKIX path building failed:
sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid
certification path to requested target.</p></blockquote><p>You&rsquo;ll need to reset your certificates; see the next section.</p><h3 id=30-resetting-the-certificates-when-things-go-wrong>3.0 Resetting the Certificates when things go wrong<a hidden class=anchor aria-hidden=true href=#30-resetting-the-certificates-when-things-go-wrong>#</a></h3><p>If the web client is unusable, you&rsquo;ll need to ssh in and use
<code>certificate-manager</code> to <a href=https://kb.vmware.com/s/article/2112283>reset the
certificates</a>. We&rsquo;ve tested this
procedure on vCenter 6.7 & 7.0.</p><pre tabindex=0><code>ssh root@vcenter-70.nono.io
shell
/usr/lib/vmware-vmca/bin/certificate-manager
</code></pre><p>Choose option 8, &ldquo;Reset all Certificates&rdquo;. Watch the screen scroll by as it
replaces the certificates, then reboot (<code>shutdown -r now</code>).</p><h3 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h3><ul><li>VMware Knowledge Base article, <a href="https://kb.vmware.com/s/article/2112277?other.KM_Utility.getArticleLanguage=1&amp;r=1&amp;other.KM_Utility.getArticleData=1&amp;other.KM_Utility.getArticle=1&amp;ui-comm-runtime-components-aura-components-siteforce-qb.Quarterback.validateRoute=1&amp;other.KM_Utility.getGUser=1">&ldquo;Replacing a vSphere 6.x Machine SSL certificate
with a Custom Certificate Authority Signed Certificate&rdquo;</a>.</li><li>We followed <a href=https://github.com/cunnie/docs/blob/7a53bb45d3a062ae40a2e3fb21a577d76d44ec3f/cfssl.md>these
instructions</a>
when generating our Certificate Signing Request (CSR) with <code>cfssl</code>.</li><li><a href=https://gist.github.com/cunnie/1119b9b59c7a50391987987310c76e6d>This gist</a>
contains our chained certificate, our root certificate, and our redacted key
(our key with several lines removed).</li><li>This <a href=https://communities.vmware.com/thread/577741>VMware thread</a> describes a
procedure to remove old trusted root certificates from PSC.</li></ul><h2 id=footnotes>Footnotes<a hidden class=anchor aria-hidden=true href=#footnotes>#</a></h2><p><a name=not_what_you_think><sup>[not-what-you-think]</sup></a></p><p>We&rsquo;re not publishing our private key, but not for the reasons you think. You probably think it&rsquo;s about security, about preventing man-in-the-middle (MITM) attacks. It&rsquo;s not. Our server is behind a firewall and can only be accessed from our internal network. If you were in a position to execute an MITM attack, it would mean that our network was grossly compromised, and the jig would be up (an MITM attack would be the least of our concerns).</p><p>No, security is not the reason. Revocation is the reason. The last time that we published a private key, our certificate was revoked in a rather <a href="https://news.ycombinator.com/item?id=10184866">spectacular manner</a>, and the CA refused to issue us another one unless we promised not to publish it. We agreed, and we hew to our agreement, for we are men of our word.</p><p><a name=hand_wavy><sup>[hand-wavy]</sup></a></p><p>This is the most hand-wavy part of the blog post, obtaining the root
certificate. On one hand, root certificates are everywhere — every one of the
billions of browsers has a copy of the <a href=https://wiki.mozilla.org/CA/Included_Certificates>approximately
160</a> root certificates.</p><p>On the other hand, you may have to do some digging. Whichever CA you choose
should publish their root certificate. Sectigo, for example, publishes their root
certificate
<a href=https://support.comodo.com/index.php?/Knowledgebase/Article/View/854/75/root-addtrustexternalcaroot>here</a>.</p><p>If that&rsquo;s a dead-end, you may want to check <a href=https://wiki.mozilla.org/CA/Included_Certificates>Mozilla&rsquo;s list</a> of root certificates.</p><p>We had an interesting experience where one version of the <a href="https://crt.sh/?id=1199354">Sectigo root
certificate</a> whose canonical name (CN) was &ldquo;USERTrust RSA
Certification Authority&rdquo;, worked, but the intermediate certificate included in the chain,
whose canonical name was also &ldquo;USERTrust RSA Certification Authority&rdquo;, and which
we mistakenly took for a root certificate, did not work.</p><p>To determine if the certificate you have is a root certificate, confirm the
subject is the same as the issuer. In the following example, we use two common
TLS command line tools (<code>cfssl</code> and <code>openssl</code>) to examine the Sectigo root
certificate <code>addtrustexternalcaroot.crt</code> and ensure the issuer is the same as
the subject:</p><p>First we use <code>cfssl</code>, whose output is JSON, which we pipe to <code>jq</code> to extract the
Common Name of the issuer and subject:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cfssl certinfo -cert addtrustexternalcaroot.crt |
</span></span><span style=display:flex><span>  jq -r <span style=color:#e6db74>&#39;[ .issuer.common_name, .subject.common_name ]&#39;</span>
</span></span></code></pre></div><p>produces:</p><pre tabindex=0><code>[
  &#34;AddTrust External CA Root&#34;,
  &#34;AddTrust External CA Root&#34;
]
</code></pre><p>With <code>openssl</code> we can use a simple <code>egrep</code> to extract the information we need.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>openssl x509 -in addtrustexternalcaroot.crt -noout -text |
</span></span><span style=display:flex><span>  egrep <span style=color:#e6db74>&#34;Issuer:|Subject:&#34;</span>
</span></span></code></pre></div><p>produces:</p><pre tabindex=0><code>Issuer: C=SE, O=AddTrust AB, OU=AddTrust External TTP Network, CN=AddTrust External CA Root
Subject: C=SE, O=AddTrust AB, OU=AddTrust External TTP Network, CN=AddTrust External CA Root
</code></pre><p>Now, when faced with the above output, a reasonable might ask, &ldquo;why on earth is
Comodo using Addtrust&rsquo;s root certificate? Why don&rsquo;t they use their own
certificate?&rdquo; One can only speculate.</p><h1 id=corrections--updates>Corrections & Updates<a hidden class=anchor aria-hidden=true href=#corrections--updates>#</a></h1><p><em>2020-12-26</em></p><p>Re-wrote instructions to have vCenter generate the CSR. It appears to work
better, specifically with regard to the update manager (though I can&rsquo;t find the
links to bolster that assertion).</p><p><em>2020-05-22</em></p><p>Updated to include newly-issued TLS certificates to replace the ones that had
been revoked, but this time we did not publish the private key (the cause of the
revocation).</p><p>We deprecate <em>Comodo</em> in favor of <em>Sectigo</em>, the new name.</p><p><em>2020-04-08</em></p><p>We include a Quickstart section for vCenter 7.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://blog.nono.io/post/upgrade_2.2-2.3_on_nsx-t/><span class=title>« Prev</span><br><span>Safely Upgrading PAS 2.2 with NSX-T Load Balancers</span></a>
<a class=next href=https://blog.nono.io/post/gobonniego_results/><span class=title>Next »</span><br><span>Benchmarking the Disk Speed of IaaSes</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7] on twitter" href="https://twitter.com/intent/tweet/?text=How%20to%20Install%20a%20TLS%20Certificate%20on%20vCenter%20Server%20Appliance%20%28VCSA%29%206.7%20%5bUpdated%20for%20vCenter%207%5d&amp;url=https%3a%2f%2fblog.nono.io%2fpost%2fvcenter_6.7_tls%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7] on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.nono.io%2fpost%2fvcenter_6.7_tls%2f&amp;title=How%20to%20Install%20a%20TLS%20Certificate%20on%20vCenter%20Server%20Appliance%20%28VCSA%29%206.7%20%5bUpdated%20for%20vCenter%207%5d&amp;summary=How%20to%20Install%20a%20TLS%20Certificate%20on%20vCenter%20Server%20Appliance%20%28VCSA%29%206.7%20%5bUpdated%20for%20vCenter%207%5d&amp;source=https%3a%2f%2fblog.nono.io%2fpost%2fvcenter_6.7_tls%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7] on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.nono.io%2fpost%2fvcenter_6.7_tls%2f&title=How%20to%20Install%20a%20TLS%20Certificate%20on%20vCenter%20Server%20Appliance%20%28VCSA%29%206.7%20%5bUpdated%20for%20vCenter%207%5d"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7] on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.nono.io%2fpost%2fvcenter_6.7_tls%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7] on whatsapp" href="https://api.whatsapp.com/send?text=How%20to%20Install%20a%20TLS%20Certificate%20on%20vCenter%20Server%20Appliance%20%28VCSA%29%206.7%20%5bUpdated%20for%20vCenter%207%5d%20-%20https%3a%2f%2fblog.nono.io%2fpost%2fvcenter_6.7_tls%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share How to Install a TLS Certificate on vCenter Server Appliance (VCSA) 6.7 [Updated for vCenter 7] on telegram" href="https://telegram.me/share/url?text=How%20to%20Install%20a%20TLS%20Certificate%20on%20vCenter%20Server%20Appliance%20%28VCSA%29%206.7%20%5bUpdated%20for%20vCenter%207%5d&amp;url=https%3a%2f%2fblog.nono.io%2fpost%2fvcenter_6.7_tls%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.nono.io/>Brian Cunnie's Technical Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
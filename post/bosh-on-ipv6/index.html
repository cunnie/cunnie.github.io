<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS | Brian Cunnie's Technical Blog</title>
<meta name=keywords content><meta name=description content="This blog post describes the procedure we followed to use the beta BOSH command line interface (CLI) to deploy an nginx webserver with a native IPv6 address (i.e. 2600:1f16:0a62:5c00::4) to AWS in addition to its IPv4 Elastic IP address (i.e. 52.15.73.90). We were then able to browse the webserver via the IPv6 protocol.
BOSH does not support IPv6. This is a proof-of-concept. Do not apply IPv6 to your production BOSH Directors or to BOSH CLI-deployed systems."><meta name=author content="Brian Cunnie"><link rel=canonical href=https://blog.nono.io/post/bosh-on-ipv6/><link crossorigin=anonymous href=/assets/css/stylesheet.e087fd1dc76e73a35ae6d7028ddc1ba41e0131e7f9b3a6e2d019a208e6d6c4b5.css integrity="sha256-4If9Hcduc6Na5tcCjdwbpB4BMef5s6bi0BmiCObWxLU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://blog.nono.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.nono.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.nono.io/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.nono.io/apple-touch-icon.png><link rel=mask-icon href=https://blog.nono.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-0NJ11E527T"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0NJ11E527T",{anonymize_ip:!1})}</script><meta property="og:title" content="Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS"><meta property="og:description" content="This blog post describes the procedure we followed to use the beta BOSH command line interface (CLI) to deploy an nginx webserver with a native IPv6 address (i.e. 2600:1f16:0a62:5c00::4) to AWS in addition to its IPv4 Elastic IP address (i.e. 52.15.73.90). We were then able to browse the webserver via the IPv6 protocol.
BOSH does not support IPv6. This is a proof-of-concept. Do not apply IPv6 to your production BOSH Directors or to BOSH CLI-deployed systems."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.nono.io/post/bosh-on-ipv6/"><meta property="og:image" content="https://nono.io/images/brian_cunnie_profile.jpg"><meta property="article:section" content="post"><meta property="article:published_time" content="2016-12-20T20:49:50+00:00"><meta property="article:modified_time" content="2016-12-20T20:49:50+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nono.io/images/brian_cunnie_profile.jpg"><meta name=twitter:title content="Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS"><meta name=twitter:description content="This blog post describes the procedure we followed to use the beta BOSH command line interface (CLI) to deploy an nginx webserver with a native IPv6 address (i.e. 2600:1f16:0a62:5c00::4) to AWS in addition to its IPv4 Elastic IP address (i.e. 52.15.73.90). We were then able to browse the webserver via the IPv6 protocol.
BOSH does not support IPv6. This is a proof-of-concept. Do not apply IPv6 to your production BOSH Directors or to BOSH CLI-deployed systems."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.nono.io/post/"},{"@type":"ListItem","position":2,"name":"Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS","item":"https://blog.nono.io/post/bosh-on-ipv6/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS","name":"Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS","description":"This blog post describes the procedure we followed to use the beta BOSH command line interface (CLI) to deploy an nginx webserver with a native IPv6 address (i.e. 2600:1f16:0a62:5c00::4) to AWS in addition to its IPv4 Elastic IP address (i.e. 52.15.73.90). We were then able to browse the webserver via the IPv6 protocol.\nBOSH does not support IPv6. This is a proof-of-concept. Do not apply IPv6 to your production BOSH Directors or to BOSH CLI-deployed systems.","keywords":[],"articleBody":"This blog post describes the procedure we followed to use the beta BOSH command line interface (CLI) to deploy an nginx webserver with a native IPv6 address (i.e. 2600:1f16:0a62:5c00::4) to AWS in addition to its IPv4 Elastic IP address (i.e. 52.15.73.90). We were then able to browse the webserver via the IPv6 protocol.\nBOSH does not support IPv6. This is a proof-of-concept. Do not apply IPv6 to your production BOSH Directors or to BOSH CLI-deployed systems.\n0. Network Diagram The following is a network diagram of our final configuration:\n1. Disclaimers We do not use a BOSH Director (an orchestrator VM) to deploy an nginx webserver; instead, we use the beta BOSH Golang CLI to deploy the webserver.\nWe do not use the BOSH Ruby command line interface (CLI) to deploy the webserver; instead, we deploy with the beta BOSH Golang CLI. Golang has extensive support for IPv6 [Golang IPv6] .\nThe procedure we follow is not entirely automated. Specifically, we use the AWS management console to manage the webserver’s instance’s IP addresses in order to auto-assign an IPv6 address to our deployed webserver.\nThe webserver requires an IPv4 address and an IPv4 Elastic IP. The webserver is not exclusively IPv6.\nWe use the BOSH os-conf release to enable IPv6 [IPv4-only Stemcells] with the enable_ipv6 job.\nWe use the BOSH Dynamic Host Configuration Protocol (DHCP) release to manually start the IPv6 DHCP client daemon which acquires an IPv6 address from Amazon [DHCPv6] .\n2. Create AWS Environment We create an IPv6-enabled environment.\nThe BOSH Documentation to create a VPC is quite thorough, and the instructions below are meant to complement the official instructions, not to replace them (for example, we do not describe creating a key pair nor allocating an Elastic IPv4 address). The instructions below describe the additional configuration required for an IPv6 deployment.\n2.0 Create VPC Create an IPv6 VPC. Currently the VPC must be created in the us-east-2 AWS Region (Ohio). Select IPv6 CIDR block → Amazon provided IPv6 CIDR.\n2.1 Create Subnet Create the Subnet in the IPv6 VPC. Select IPv6 CIDR block → Specify a custom IPv6 CIDR\nWe choose the IPv6 2600:1f16:0a62:5c00::/64 Classless Inter-Domain Routing (CIDR) for our subnet [IPv6 CIDR] .\nWe were excited to discover that we could select Subnet Actions → Modify auto-assign IP settings → Enable auto-assign IPv6 address, but disappointed to learn that it had no effect on our BOSH-deployed VM (it had no routable IPv6 addresses when deployed).\n2.2 Create Internet Gateway Create an Internet Gateway.\nAttach it to the IPv6 VPC.\n2.3 Create Route Table Create route table. Add default routes for outbound IPv4 traffic (0.0.0.0/0) and for outbound IPv6 traffic (::/0)\n::/0 is IPv6 shorthand for all IP addresses. A routing table entry whose destination is ::/0 is the default IPv6 route.\n2.4 Associate Route Table with Subnet 2.5 Create Security Group Create the Security Group in the IPv6 VPC\nWe enable all traffic, but we are aware that the security-minded should be much more prudent.\nNote that we enable traffic from all IPv4 sources (0.0.0.0/0) and all IPv6 sources (::/0).\n3. Deploy IPv6-enabled nginx webserver We deploy the nginx webserver.\n3.0 Create BOSH Manifest Here is our BOSH Manifest.\nWe use LastPass to store our secrets (e.g. our AWS Access Key ID and Secret Access Key). The new BOSH CLI allows us to inject our secrets into our manifest (all properties enclosed in a double parentheses are templatized). In this snippet of the manifest, we templatize our Amazon credentials:\naws: access_key_id: ((aws_access_key_id_ipv6)) # \u003c--- Replace with AWS Access Key ID secret_access_key: ((aws_secret_access_key_ipv6)) # \u003c--- Replace with AWS Secret Key 3.1 Deploy with BOSH We deploy our webserver, using the LastPass CLI to read in our secrets from a YAML file which is stored as a secure note:\nbosh create-env bosh-aws-ipv6.yml -l \u003c(lpass show --note deployments) 3.2 Check Instance Networking This step is optional. We ssh to the instance to check IPv6 connectivity, first removing the history of the ssh key of the previous deploy using ssh-keygen -R. We use the IP command ip addr to show the status of our eth0 interface:\n$ ssh-keygen -R 52.15.73.90; ssh -i ~/.ssh/aws_nono.pem vcap@52.15.73.90 ... /:~$ ip addr show dev eth0 2: eth0: mtu 9001 qdisc mq state UP group default qlen 1000 link/ether 02:30:8c:56:50:e9 brd ff:ff:ff:ff:ff:ff inet 10.0.0.7/24 brd 10.0.0.255 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::30:8cff:fe56:50e9/64 scope link valid_lft forever preferred_lft forever We note the following:\nIPv4 connectivity is as expected: The local address is set to 10.0.0.7, as specified in our manifest. IPv6 is enabled (as determined by the inet6 line); however, the address, fe80::30:8cff:fe56:50e9/64, is a Link-local address and not routable. 3.3 Manually Add IPv6 address Select our instance and choose Actions → Networking → Manage IP Addresses\nWe assign the address 2600:1f16:0a62:5c00::4 [IPv6 notation] . to our webserver.\nNote: we chose the address ::4 within our subnet for our instance. Addresses :: (i.e. ::0), ::1, ::2, and ::3 are reserved by Amazon and cannot be assigned to instances.\n4. Test IPv6 4.1 Browse to Webserver We browse to our newly-deployed webserver’s IPv6 address. Note that we must bracket the IPv6 address.\nOur deployed webserver’s home page displays our workstation’s IPv6 address.\n4.2 Confirm IPv6 Assignment via AWS Console [Optional] The Amazon console displays the instance’s IPv6 address next to the IPv6 IPs header.\n4.3 Confirm IPv6 Assignment via ssh [Optional] The ip addr show dev eth0 command displays our 2600:1f16:a62:5c00::4 /128 AWS-assigned routable IPv6 address:\n/:~$ ip addr show dev eth0 2: eth0: mtu 9001 qdisc mq state UP group default qlen 1000 link/ether 02:30:8c:56:50:e9 brd ff:ff:ff:ff:ff:ff inet 10.0.0.7/24 brd 10.0.0.255 scope global eth0 valid_lft forever preferred_lft forever inet6 2600:1f16:a62:5c00::4/128 scope global valid_lft forever preferred_lft forever inet6 fe80::30:8cff:fe56:50e9/64 scope link valid_lft forever preferred_lft forever 5. Troubleshooting Do not use an m3 instance type [Instance Types] ; it triggers the following error:\nDeploying: Creating instance 'bosh/0': Creating VM: Creating vm with stemcell cid 'ami-5081db35 light': CPI 'create_vm' method responded with error: CmdError{\"type\":\"Unknown\",\"message\":\"The requested configuration is currently not supported. Please check the documentation for supported configurations.\",\"ok_to_retry\":false} The IPv6 address may take up to 3 minutes to acquire after modifying the instance’s IP addresses to auto-assign an IPv6 address.\n6. Footnotes [Golang IPv6] Golang has been designed with IPv6 in mind, at times at the expense of IPv4 users (\"ParseIP always returns an IP in ipv6 ipv4-mapped address format\", “netstat only list ipv6 port”).\n[IPv4-only Stemcells] BOSH stemcells, as a side-effect of the hardening initiative, disable IPv6 by default through judicious use of kernel (system) variable settings.\nSecurity Technical Implementation Guide (STIG) V-38546 Pivotal Tracker story GitHub commit We did not need to un-blacklist the IPv6 kernel module in /etc/modprobe.d/blacklist.conf: IPv6 is built into the kernel; it’s not a module.\n[DHCPv6] AWS uses DHCPv6 to allocate IPv6 addresses in lieu of the more common stateless address autoconfiguration (SLAAC), a component of the Neighbor Discovery Protocol (NDP).\n[IPv6 CIDR] Although IPv6 networks can be subnetted in a manner similar to IPv4 networks, the primary method of allocating IP addresses, SLAAC, requires a /64 subnet. Hence almost all IPv6 subnets are /64.\nFor example, although AWS allocates a /56 IPv6 range for each VPC, AWS requires all IPv6 subnets within the VPC to have a /64 CIDR.\nAWS is more flexible with IPv4 subnetting: A VPC’s IPv4 allocation can range from /16 to /28. The subnets also range from /16 to /28.\n[IPv6 notation] IPv6 address representation recommends separating each 16-bit group with colons (\":\"), suppressing leading zeros (“0”), and using the double-colon (\"::\") to represent one or more all-zero groups. Thus, our webserver’s address is represented as 2600:1f16:a62:5c00::4 although the unsimplified address would be represented as 2600:1f16:0a62:5c00:0000:0000:0000:0004.\nAmazon reserves the addresses ::1, ::2, ::3 in each IPv6 subnet.\n[Instance Types] AWS notes in their announcement:\nIt works with all current-generation EC2 instance types with the exception of M3 and G2\n","wordCount":"1316","inLanguage":"en","datePublished":"2016-12-20T20:49:50Z","dateModified":"2016-12-20T20:49:50Z","author":{"@type":"Person","name":"Brian Cunnie"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.nono.io/post/bosh-on-ipv6/"},"publisher":{"@type":"Organization","name":"Brian Cunnie's Technical Blog","logo":{"@type":"ImageObject","url":"https://blog.nono.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.nono.io/ accesskey=h title="Brian Cunnie's Technical Blog (Alt + H)">Brian Cunnie's Technical Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.nono.io/>Home</a>&nbsp;»&nbsp;<a href=https://blog.nono.io/post/>Posts</a></div><h1 class="post-title entry-hint-parent">Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS</h1><div class=post-meta><span title='2016-12-20 20:49:50 +0000 UTC'>December 20, 2016</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Brian Cunnie&nbsp;|&nbsp;<a href=https://github.com/cunnie/cunnie.github.io/tree/master/content/post/bosh-on-ipv6.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>This blog post describes the procedure we followed to use the <a href=https://bosh.io/docs/cli-v2.html>beta BOSH command
line interface (CLI)</a> to deploy an nginx
webserver with a native IPv6 address (i.e. 2600:1f16:0a62:5c00::4) to AWS in
addition to its IPv4 Elastic IP address (i.e. 52.15.73.90). We were then able
to browse the webserver <em>via the IPv6 protocol.</em></p><div class="alert alert-error" role=alert><p>BOSH does not support IPv6. This is a proof-of-concept. Do not apply IPv6 to
your production BOSH Directors or to BOSH CLI-deployed systems.</p></div><h2 id=0-network-diagram>0. Network Diagram<a hidden class=anchor aria-hidden=true href=#0-network-diagram>#</a></h2><p>The following is a network diagram of our final configuration:</p><figure><img loading=lazy src="https://docs.google.com/drawings/d/1WemXsPIQ2KxWRT6lh0nYprDnE-LvsVzYJkGHKZ5WmWc/pub?w=781&amp;amp;h=1087"></figure><h2 id=1-disclaimers>1. Disclaimers<a hidden class=anchor aria-hidden=true href=#1-disclaimers>#</a></h2><p>We do not use a BOSH Director (an orchestrator VM) to deploy an nginx webserver;
instead, we use the beta BOSH Golang CLI to deploy the webserver.</p><p>We do <em>not</em> use the <a href=https://rubygems.org/gems/bosh_cli/versions/1.3262.4.0>BOSH Ruby command line
interface</a> (CLI) to
deploy the webserver; instead, we deploy with the beta BOSH Golang CLI. Golang
has extensive support for IPv6 <sup><a href=#golang_ipv6>[Golang
IPv6]</a></sup> .</p><p>The procedure we follow is <em>not</em> entirely automated. Specifically, we use the
AWS management console to manage the webserver&rsquo;s instance&rsquo;s IP addresses in
order to auto-assign an IPv6 address to our deployed webserver.</p><p>The webserver requires an IPv4 address and an IPv4 Elastic IP. The webserver is
not exclusively IPv6.</p><p>We use the <a href=https://github.com/cloudfoundry/os-conf-release>BOSH os-conf
release</a> to enable IPv6 <sup><a href=#ipv4_only_stemcells>[IPv4-only Stemcells]</a></sup> with the
<code>enable_ipv6</code> job.</p><p>We use the <a href=https://github.com/pivotal-cf-experimental/dhcp-server-release>BOSH Dynamic Host Configuration Protocol (DHCP)
release</a> to
manually start the IPv6 DHCP client daemon which acquires an IPv6 address from
Amazon <sup><a href=#dhcpv6>[DHCPv6]</a></sup> .</p><h2 id=2-create-aws-environment>2. Create AWS Environment<a hidden class=anchor aria-hidden=true href=#2-create-aws-environment>#</a></h2><p>We create an IPv6-enabled environment.</p><p>The <a href=http://bosh.io/docs/init-aws.html#create-vpc>BOSH Documentation</a> to create
a VPC is quite thorough, and the instructions below are meant to complement the
official instructions, not to replace them (for example, we do not describe
creating a key pair nor allocating an Elastic IPv4 address). <em>The instructions
below describe the additional configuration required for an IPv6 deployment</em>.</p><h3 id=20-create-vpc>2.0 Create VPC<a hidden class=anchor aria-hidden=true href=#20-create-vpc>#</a></h3><p>Create an IPv6 VPC. Currently the VPC must be created in the <em>us-east-2</em> <a href=http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html#concepts-available-regions>AWS
Region</a>
(Ohio). Select <strong>IPv6 CIDR block → Amazon provided IPv6 CIDR</strong>.</p><figure><img loading=lazy src=https://cloud.githubusercontent.com/assets/1020675/21070083/2c93f73a-be35-11e6-812c-cc973df0dfa9.png></figure><h3 id=21-create-subnet>2.1 Create Subnet<a hidden class=anchor aria-hidden=true href=#21-create-subnet>#</a></h3><p>Create the Subnet in the IPv6 VPC. Select <strong>IPv6 CIDR block →
Specify a custom IPv6 CIDR</strong></p><figure><img loading=lazy src=https://cloud.githubusercontent.com/assets/1020675/21070194/87db9b2e-be36-11e6-93c1-76cfec9169b8.png></figure><p>We choose the IPv6 <code>2600:1f16:0a62:5c00::/64</code> Classless Inter-Domain Routing
(CIDR) for our subnet
<sup><a href=#ipv6_cidr>[IPv6 CIDR]</a></sup> .</p><p>We were excited to discover that we could select <strong>Subnet Actions → Modify
auto-assign IP settings → Enable auto-assign IPv6 address</strong>, but
disappointed to learn that it had no effect on our BOSH-deployed VM (it had no
routable IPv6 addresses when deployed).</p><h3 id=22-create-internet-gateway>2.2 Create Internet Gateway<a hidden class=anchor aria-hidden=true href=#22-create-internet-gateway>#</a></h3><p>Create an Internet Gateway.</p><p>Attach it to the IPv6 VPC.</p><h3 id=23-create-route-table>2.3 Create Route Table<a hidden class=anchor aria-hidden=true href=#23-create-route-table>#</a></h3><p>Create route table. Add default routes for outbound IPv4 traffic (0.0.0.0/0)
and for outbound IPv6 traffic (::/0)</p><figure><img loading=lazy src=https://cloud.githubusercontent.com/assets/1020675/21197499/8a8fc4c2-c1f0-11e6-8083-289e89c0b951.png></figure><p>::/0 is IPv6 shorthand for all IP addresses. A routing table entry whose
destination is ::/0 is the default IPv6 route.</p><h3 id=24-associate-route-table-with-subnet>2.4 Associate Route Table with Subnet<a hidden class=anchor aria-hidden=true href=#24-associate-route-table-with-subnet>#</a></h3><figure><img loading=lazy src=https://cloud.githubusercontent.com/assets/1020675/21315699/46ac2668-c5b2-11e6-80bb-e2b34f1f239e.png></figure><h3 id=25-create-security-group>2.5 Create Security Group<a hidden class=anchor aria-hidden=true href=#25-create-security-group>#</a></h3><p>Create the Security Group in the IPv6 VPC</p><p>We enable all traffic, but we are aware that the security-minded should be much
more prudent.</p><p>Note that we enable traffic from all IPv4 sources (<strong>0.0.0.0/0</strong>) and all IPv6
sources (<strong>::/0</strong>).</p><figure><img loading=lazy src=https://cloud.githubusercontent.com/assets/1020675/21070453/fa703cf0-be39-11e6-8b2c-1b74ecab796c.png></figure><h2 id=3-deploy-ipv6-enabled-nginx-webserver>3. Deploy IPv6-enabled nginx webserver<a hidden class=anchor aria-hidden=true href=#3-deploy-ipv6-enabled-nginx-webserver>#</a></h2><p>We deploy the nginx webserver.</p><h3 id=30-create-bosh-manifest>3.0 Create BOSH Manifest<a hidden class=anchor aria-hidden=true href=#30-create-bosh-manifest>#</a></h3><p>Here is our <a href=https://github.com/cunnie/deployments/blob/a86ac4f499dffdf2d0bb62b4ab031cff78f021a0/nginx-aws-ipv6.yml>BOSH
Manifest</a>.</p><p>We use LastPass to store our secrets (e.g. our AWS Access Key ID and Secret
Access Key). The new BOSH CLI allows us to inject our secrets into our manifest
(all properties enclosed in a double parentheses are templatized). In this
snippet of the manifest, we templatize our Amazon credentials:</p><pre tabindex=0><code>aws:
  access_key_id: ((aws_access_key_id_ipv6)) # &lt;--- Replace with AWS Access Key ID
  secret_access_key: ((aws_secret_access_key_ipv6)) # &lt;--- Replace with AWS Secret Key
</code></pre><h3 id=31-deploy-with-bosh>3.1 Deploy with BOSH<a hidden class=anchor aria-hidden=true href=#31-deploy-with-bosh>#</a></h3><p>We deploy our webserver, using the LastPass CLI to read in our secrets from
a YAML file which is stored as a secure note:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bosh create-env bosh-aws-ipv6.yml -l &lt;<span style=color:#f92672>(</span>lpass show --note deployments<span style=color:#f92672>)</span>
</span></span></code></pre></div><h3 id=32-check-instance-networking>3.2 Check Instance Networking<a hidden class=anchor aria-hidden=true href=#32-check-instance-networking>#</a></h3><p>This step is optional. We ssh to the instance to check IPv6 connectivity, first removing the history of the ssh key of the previous deploy using <code>ssh-keygen -R</code>. We use
the IP command <code>ip addr</code> to show the status of our <code>eth0</code> interface:</p><pre tabindex=0><code>$ ssh-keygen -R 52.15.73.90; ssh -i ~/.ssh/aws_nono.pem vcap@52.15.73.90
...
/:~$ ip addr show dev eth0
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 9001 qdisc mq state UP group default qlen 1000
    link/ether 02:30:8c:56:50:e9 brd ff:ff:ff:ff:ff:ff
    inet 10.0.0.7/24 brd 10.0.0.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::30:8cff:fe56:50e9/64 scope link
       valid_lft forever preferred_lft forever
</code></pre><p>We note the following:</p><ul><li>IPv4 connectivity is as expected: The local address is set to 10.0.0.7, as
specified in our manifest.</li><li>IPv6 is enabled (as determined by the <code>inet6</code> line); however, the address,
fe80::30:8cff:fe56:50e9/64, is a <a href=https://en.wikipedia.org/wiki/Link-local_address>Link-local address</a>
and not routable.</li></ul><h3 id=33-manually-add-ipv6-address>3.3 Manually Add IPv6 address<a hidden class=anchor aria-hidden=true href=#33-manually-add-ipv6-address>#</a></h3><p>Select our instance and choose <strong>Actions → Networking → Manage IP
Addresses</strong></p><p>We assign the address 2600:1f16:0a62:5c00::4
<sup><a href=#ipv6_notation>[IPv6 notation]</a></sup> .
to our webserver.</p><figure><img loading=lazy src=https://cloud.githubusercontent.com/assets/1020675/21315710/4f92fb1c-c5b2-11e6-8114-f182ab32e9fd.png></figure><p>Note: we chose the address ::4 within our subnet for our instance. Addresses
:: (i.e. ::0), ::1, ::2, and ::3 are reserved by Amazon and cannot be assigned to instances.</p><h2 id=4-test-ipv6>4. Test IPv6<a hidden class=anchor aria-hidden=true href=#4-test-ipv6>#</a></h2><h3 id=41-browse-to-webserver>4.1 Browse to Webserver<a hidden class=anchor aria-hidden=true href=#41-browse-to-webserver>#</a></h3><p>We browse to our newly-deployed webserver&rsquo;s IPv6 address. Note that we must
<a href=https://en.wikipedia.org/wiki/IPv6_address#Literal_IPv6_addresses_in_network_resource_identifiers>bracket the IPv6 address</a>.</p><p>Our deployed webserver&rsquo;s home page displays our workstation&rsquo;s IPv6 address.</p><figure><img loading=lazy src=https://cloud.githubusercontent.com/assets/1020675/21353219/e4818ee2-c679-11e6-9a5a-d10d835e9b46.png></figure><h3 id=42-confirm-ipv6-assignment-via-aws-console>4.2 Confirm IPv6 Assignment via AWS Console<a hidden class=anchor aria-hidden=true href=#42-confirm-ipv6-assignment-via-aws-console>#</a></h3><p>[Optional] The Amazon console displays the instance&rsquo;s IPv6 address next to the <strong>IPv6 IPs</strong>
header.</p><figure><img loading=lazy src=https://cloud.githubusercontent.com/assets/1020675/21353225/ec7544d6-c679-11e6-8937-4dbe3f299b97.png></figure><h3 id=43-confirm-ipv6-assignment-via-ssh>4.3 Confirm IPv6 Assignment via ssh<a hidden class=anchor aria-hidden=true href=#43-confirm-ipv6-assignment-via-ssh>#</a></h3><p>[Optional] The <code>ip addr show dev eth0</code> command displays our 2600:1f16:a62:5c00::4 /128
AWS-assigned routable IPv6 address:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/:~$ ip addr show dev eth0
</span></span><span style=display:flex><span>2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style=color:#ae81ff>9001</span> qdisc mq state UP group default qlen <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    link/ether 02:30:8c:56:50:e9 brd ff:ff:ff:ff:ff:ff
</span></span><span style=display:flex><span>    inet 10.0.0.7/24 brd 10.0.0.255 scope global eth0
</span></span><span style=display:flex><span>       valid_lft forever preferred_lft forever
</span></span><span style=display:flex><span>    inet6 2600:1f16:a62:5c00::4/128 scope global
</span></span><span style=display:flex><span>       valid_lft forever preferred_lft forever
</span></span><span style=display:flex><span>    inet6 fe80::30:8cff:fe56:50e9/64 scope link
</span></span><span style=display:flex><span>       valid_lft forever preferred_lft forever
</span></span></code></pre></div><h2 id=5-troubleshooting>5. Troubleshooting<a hidden class=anchor aria-hidden=true href=#5-troubleshooting>#</a></h2><p>Do not use an <code>m3</code> instance type <sup><a href=#supported_instance_types class=alert-link>[Instance Types]</a></sup> ; it triggers the following error:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Deploying:
</span></span><span style=display:flex><span>  Creating instance <span style=color:#e6db74>&#39;bosh/0&#39;</span>:
</span></span><span style=display:flex><span>    Creating VM:
</span></span><span style=display:flex><span>      Creating vm with stemcell cid <span style=color:#e6db74>&#39;ami-5081db35 light&#39;</span>:
</span></span><span style=display:flex><span>        CPI <span style=color:#e6db74>&#39;create_vm&#39;</span> method responded with error: CmdError<span style=color:#f92672>{</span><span style=color:#e6db74>&#34;type&#34;</span>:<span style=color:#e6db74>&#34;Unknown&#34;</span>,<span style=color:#e6db74>&#34;message&#34;</span>:<span style=color:#e6db74>&#34;The requested configuration is currently not supported. Please check the documentation for supported configurations.&#34;</span>,<span style=color:#e6db74>&#34;ok_to_retry&#34;</span>:false<span style=color:#f92672>}</span>
</span></span></code></pre></div><p>The IPv6 address may take up to 3 minutes to acquire after modifying the
instance&rsquo;s IP addresses to auto-assign an IPv6 address.</p><h2 id=6-footnotes>6. Footnotes<a hidden class=anchor aria-hidden=true href=#6-footnotes>#</a></h2><p><a name=golang_ipv6><sup>[Golang IPv6]</sup></a> Golang has been designed with
IPv6 in mind, at times at the expense of IPv4 users ("<a href=https://github.com/golang/go/issues/8985>ParseIP always returns an
IP in ipv6 ipv4-mapped address
format</a>", &ldquo;<a href=https://groups.google.com/forum/#!msg/golang-nuts/F5HE7Eqb6iM/q_um2VqT5vAJ>netstat only list ipv6
port</a>&rdquo;).</p><p><a name=ipv4_only_stemcells><sup>[IPv4-only Stemcells]</sup></a> BOSH
stemcells, as a side-effect of the hardening initiative, disable IPv6 by default
through judicious use of kernel (system) variable settings.</p><ul><li>Security Technical Implementation Guide (STIG) <a href=https://www.stigviewer.com/stig/red_hat_enterprise_linux_6/2013-06-03/finding/V-38546>V-38546</a></li><li>Pivotal Tracker <a href=https://www.pivotaltracker.com/n/projects/956238/stories/119692507>story</a></li><li>GitHub <a href=https://github.com/cloudfoundry/bosh/commit/44607ae50110ca0c723f7509073d28542a7d7a4d>commit</a></li></ul><p>We did not need to un-blacklist the IPv6 kernel module in <code>/etc/modprobe.d/blacklist.conf</code>:
IPv6 is built into the kernel; it&rsquo;s not a module.</p><p><a name=dhcpv6><sup>[DHCPv6]</sup></a> AWS uses DHCPv6 to allocate IPv6
addresses in lieu of the more common <a href=https://en.wikipedia.org/wiki/IPv6#Stateless_address_autoconfiguration_.28SLAAC.29>stateless address autoconfiguration
(SLAAC)</a>,
a component of the <a href=https://en.wikipedia.org/wiki/Neighbor_Discovery_Protocol>Neighbor Discovery
Protocol</a> (NDP).</p><p><a name=ipv6_cidr><sup>[IPv6 CIDR]</sup></a> Although IPv6 networks can be
<a href=https://en.wikipedia.org/wiki/IPv6_subnetting_reference>subnetted</a> in a manner
similar to IPv4 networks, the primary method of allocating IP addresses, SLAAC,
requires a /64 subnet. Hence almost all IPv6 subnets are /64.</p><p>For example, although AWS allocates a /56 IPv6 range for each VPC, AWS
requires all IPv6 subnets within the VPC to have a /64 CIDR.</p><p>AWS is more flexible with IPv4 subnetting: A VPC&rsquo;s IPv4 allocation <a href=http://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Subnets.html#VPC_Sizing>can range from</a> /16 to /28. The subnets also range from /16 to /28.</p><p><a name=ipv6_notation><sup>[IPv6 notation]</sup></a>
<a href=https://en.wikipedia.org/wiki/IPv6_address#Recommended_representation_as_text>IPv6 address representation</a> recommends separating each 16-bit group with colons (":"), suppressing leading zeros (&ldquo;0&rdquo;), and using the double-colon ("::") to represent one or more all-zero groups. Thus, our webserver&rsquo;s address is represented as 2600:1f16:a62:5c00::4 although the unsimplified address would be represented as 2600:1f16:0a62:5c00:0000:0000:0000:0004.</p><p>Amazon reserves the addresses ::1, ::2, ::3 in each IPv6 subnet.</p><p><a name=supported_instance_types><sup>[Instance Types]</sup></a>
AWS notes in <a href=https://aws.amazon.com/blogs/aws/new-ipv6-support-for-ec2-instances-in-virtual-private-clouds/>their
announcement</a>:</p><blockquote><p>It works with all current-generation EC2 instance types with the exception of M3 and G2</p></blockquote></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://blog.nono.io/post/ntp-costs-500/><span class=title>« Prev</span><br><span>Why Is My NTP Server Costing $500/Year? Part 3</span>
</a><a class=next href=https://blog.nono.io/post/nsx_with_bosh/><span class=title>Next »</span><br><span>Leveraging NSX's Features with BOSH's vSphere CPI</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS on x" href="https://x.com/intent/tweet/?text=Using%20the%20beta%20BOSH%20CLI%20to%20Deploy%20an%20IPv6-enabled%20nginx%20Server%20to%20AWS&amp;url=https%3a%2f%2fblog.nono.io%2fpost%2fbosh-on-ipv6%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.nono.io%2fpost%2fbosh-on-ipv6%2f&amp;title=Using%20the%20beta%20BOSH%20CLI%20to%20Deploy%20an%20IPv6-enabled%20nginx%20Server%20to%20AWS&amp;summary=Using%20the%20beta%20BOSH%20CLI%20to%20Deploy%20an%20IPv6-enabled%20nginx%20Server%20to%20AWS&amp;source=https%3a%2f%2fblog.nono.io%2fpost%2fbosh-on-ipv6%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.nono.io%2fpost%2fbosh-on-ipv6%2f&title=Using%20the%20beta%20BOSH%20CLI%20to%20Deploy%20an%20IPv6-enabled%20nginx%20Server%20to%20AWS"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.nono.io%2fpost%2fbosh-on-ipv6%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS on whatsapp" href="https://api.whatsapp.com/send?text=Using%20the%20beta%20BOSH%20CLI%20to%20Deploy%20an%20IPv6-enabled%20nginx%20Server%20to%20AWS%20-%20https%3a%2f%2fblog.nono.io%2fpost%2fbosh-on-ipv6%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS on telegram" href="https://telegram.me/share/url?text=Using%20the%20beta%20BOSH%20CLI%20to%20Deploy%20an%20IPv6-enabled%20nginx%20Server%20to%20AWS&amp;url=https%3a%2f%2fblog.nono.io%2fpost%2fbosh-on-ipv6%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Using the beta BOSH CLI to Deploy an IPv6-enabled nginx Server to AWS on ycombinator" href="https://news.ycombinator.com/submitlink?t=Using%20the%20beta%20BOSH%20CLI%20to%20Deploy%20an%20IPv6-enabled%20nginx%20Server%20to%20AWS&u=https%3a%2f%2fblog.nono.io%2fpost%2fbosh-on-ipv6%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.nono.io/>Brian Cunnie's Technical Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>